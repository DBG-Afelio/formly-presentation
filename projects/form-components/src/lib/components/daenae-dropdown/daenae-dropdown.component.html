<form class="form" [formGroup]="dropdownFormGroup">
    <div *ngIf="config" class="dropdown-menu" [ngClass]="config.dropdownClassName">
        <!-- Toggle dropdown button -->
        <button
            (click)="toggleDropdown()"
            [ngClass]="[config.toggleDropdownClassName ? config.toggleDropdownClassName : '']"
            class="button"
        >
            <span *ngIf="config.toggleDropdownIconClassName" class="icon" [ngClass]="config.toggleDropdownIconClassName"></span>
            {{ config.toggleDropdownLabel | translate }}
            <span class="icon" [ngClass]="[(isVisible$ | async) ? 'icon-chevronAlt-up' : 'icon-chevronAlt-bottom']"></span>
        </button>
        <div *ngIf="isVisible$ | async" class="dropdown-menu__menu" [ngClass]="config.dropdownContainerClassName">
            <div *ngFor="let item of config.items" class="menu-item" [ngClass]="item.dropdownItemClassName">
                <div *ngIf="item.separatorTopClassName" [ngClass]="item.separatorTopClassName"></div>
                <div *ngIf="item.title" [ngClass]="item.titleClassName">{{ item.title | translate }}</div>

                <!-- selects -->
                <ng-container *ngIf="item.options">
                    <div *ngIf="dropdownSelectToggledDictionary[item.key]" [ngClass]="item.selectItemClassName" class="px-m pt-xs pb-m">
                        <ng-select
                            class="select"
                            [searchable]="false"
                            [ngClass]="item.selectClassName"
                            [formControlName]="item.key"
                            [placeholder]="item.placeholder | translate"
                        >
                            <ng-option *ngFor="let option of item.options" [value]="option.value">{{ option.label | uppercase | translate }}</ng-option>
                        </ng-select>
                        <div class="select-buttons">
                            <button *ngIf="item.validateButtonClassName" class="button" [ngClass]="item.validateButtonClassName" type="button" (click)="validateDropdownSelect(item)"></button>
                            <button *ngIf="item.cancelButtonClassName" class="button" [ngClass]="item.cancelButtonClassName" type="button" (click)="toggleSelect(item)"></button>
                        </div>
                    </div>
                    <div *ngIf="!dropdownSelectToggledDictionary[item.key]" class="px-m pb-m pt-xs">
                        <button
                            class="button"
                            [ngClass]="[item.labelClassName ? item.labelClassName : '']"
                            (click)="dropdownItemClicked(item)"
                        >
                            <span *ngIf="item.iconClassName" class="icon" [ngClass]="item.iconClassName"></span>
                        </button>
                        <span>{{ item.label | translate }}</span>
                    </div>
                </ng-container>

                <!-- Items & buttons -->
                <ng-container *ngIf="!item.options">
                    <div class="px-m py-s" [ngClass]="{'flex flex-middle flex-between': item.iconKey}">
                        <button
                            class="button"
                            [ngClass]="[item.labelClassName ? item.labelClassName : '']"
                            (click)="dropdownItemClicked(item)"
                        >
                            <span *ngIf="!item.iconKey && item.iconClassName" class="icon" [ngClass]="item.iconClassName"></span>
                            <span>{{ item.label | translate }}</span>
                        </button>
                        <span *ngIf="item.iconKey && item.iconClassName" (click)="dropdownIconClicked(item)" [ngClass]="item.iconClassName" class="icon"></span>
                    </div>
                </ng-container>
            </div>
        </div>
    </div>
</form>